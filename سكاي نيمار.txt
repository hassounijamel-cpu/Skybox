local player = game.Players.LocalPlayer

-- دالة كتابة النص حرف حرف
local function typeWriter(textLabel, text, speed)
    textLabel.Text = ""
    for i = 1, #text do
        textLabel.Text = textLabel.Text .. text:sub(i, i)
        wait(speed)
    end
end

-- شاشة سوداء للانتظار
local blackScreen = Instance.new("ScreenGui")
blackScreen.Name = "BlackScreen"
blackScreen.Parent = player:WaitForChild("PlayerGui")

local blackFrame = Instance.new("Frame")
blackFrame.Size = UDim2.new(1, 0, 1, 0)
blackFrame.BackgroundColor3 = Color3.new(0,0,0)
blackFrame.Parent = blackScreen

local label = Instance.new("TextLabel")
label.Size = UDim2.new(1,0,0,100)
label.Position = UDim2.new(0,0,0.5,-50)
label.TextColor3 = Color3.new(1,1,1)
label.BackgroundTransparency = 1
label.Font = Enum.Font.SourceSansBold
label.TextSize = 36
label.Text = ""
label.Parent = blackFrame

-- كتابة الرسالة الأولى
typeWriter(label, "تم صنع هذا السكربت بواسطه نيمار", 0.05)
wait(3)

-- كتابة الرسالة الثانية
label.Text = ""
typeWriter(label, "هذا سكربت sky box خاص لماب البيوت و لا يصير في ماب غيره", 0.05)
wait(3)

-- إزالة الشاشة السوداء
blackScreen:Destroy()

-- *** هنا يبدأ سكربت الـ GUI الأصلي ***
-- إنشاء عناصر الـ GUI كما في سكربتك الأصلي
local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local Dropdown = Instance.new("TextButton")
local ListFrame = Instance.new("Frame")
local UIListLayout = Instance.new("UIListLayout")
local ActionButton = Instance.new("TextButton")

ScreenGui.Name = "SkinsGUI"
ScreenGui.Parent = player:WaitForChild("PlayerGui")

Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.fromRGB(15, 35, 75)
Frame.Size = UDim2.new(0, 500, 0, 500)
Frame.Position = UDim2.new(0.2, 0, 0.1, 0)
Frame.Active = true
Frame.Draggable = true
Frame.ClipsDescendants = true

Title.Parent = Frame
Title.Text = "سكربت Skybox (نيمار)"
Title.Size = UDim2.new(1, 0, 0, 60)
Title.BackgroundColor3 = Color3.fromRGB(255, 140, 0)
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 32
Title.TextStrokeTransparency = 0.7
Title.BorderSizePixel = 0
Title.BackgroundTransparency = 0
Title.AutoLocalize = false

Dropdown.Parent = Frame
Dropdown.Position = UDim2.new(0, 50, 0, 100)
Dropdown.Size = UDim2.new(0, 400, 0, 50)
Dropdown.BackgroundColor3 = Color3.fromRGB(255, 140, 0)
Dropdown.Text = "اضغط لاختيار سكن"
Dropdown.TextColor3 = Color3.fromRGB(255, 255, 255)
Dropdown.Font = Enum.Font.SourceSansBold
Dropdown.TextSize = 24
Dropdown.AutoLocalize = false

local function makeRounded(frame, radius)
    local UICorner = Instance.new("UICorner")
    UICorner.CornerRadius = UDim.new(0, radius)
    UICorner.Parent = frame
end

makeRounded(Frame, 20)
makeRounded(Dropdown, 15)

ListFrame.Parent = Frame
ListFrame.BackgroundColor3 = Color3.fromRGB(25, 55, 105)
ListFrame.Position = UDim2.new(0, 50, 0, 160)
ListFrame.Size = UDim2.new(0, 400, 0, 200)
ListFrame.Visible = false
UIListLayout.Parent = ListFrame
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
makeRounded(ListFrame, 15)

ActionButton.Parent = Frame
ActionButton.Position = UDim2.new(0, 50, 0, 380)
ActionButton.Size = UDim2.new(0, 400, 0, 60)
ActionButton.BackgroundColor3 = Color3.fromRGB(255, 140, 0)
ActionButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ActionButton.Font = Enum.Font.SourceSansBold
ActionButton.TextSize = 28
ActionButton.Text = "فعل skybox"
ActionButton.Visible = true
makeRounded(ActionButton, 20)

local Skins = {
    ["سكن رعب"] = 11714553713,
    ["سكن رعب ٢"] = 4704597991,
    ["سكن رعب ٣"] = 117925030640474,
    ["سكن برشلونه"] = 15795436784,
    ["سكن ريال مدريد"] = 1314630071
}

local selectedSkinId

for name, id in pairs(Skins) do
    local Button = Instance.new("TextButton")
    Button.Size = UDim2.new(1, 0, 0, 40)
    Button.Text = name
    Button.BackgroundColor3 = Color3.fromRGB(255, 140, 0)
    Button.TextColor3 = Color3.fromRGB(255, 255, 255)
    Button.Font = Enum.Font.SourceSansBold
    Button.TextSize = 22
    Button.Parent = ListFrame
    makeRounded(Button, 15)

    Button.MouseButton1Click:Connect(function()
        Dropdown.Text = "✅ " .. name
        ListFrame.Visible = false
        selectedSkinId = id
        local args = { id }
        game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("WearShirt"):InvokeServer(unpack(args))
    end)
end

Dropdown.MouseButton1Click:Connect(function()
    ListFrame.Visible = not ListFrame.Visible
end)

ActionButton.MouseButton1Click:Connect(function()
    local args = {
        {100839513065432}
    }
    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("ChangeCharacterBody"):InvokeServer(unpack(args))

    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")
    local CurrentTrack
    local Settings = {
        ["Fade In"] = 0.1,
        ["Fade Out"] = 0.1,
        ["Weight"] = 1,
        ["Speed"] = 1,
        ["Time Position"] = 0
    }

    local function LoadTrack(id)
        if CurrentTrack then CurrentTrack:Stop(0) end
        local animId = "rbxassetid://" .. tostring(id)
        local newAnim = Instance.new("Animation")
        newAnim.AnimationId = animId
        local newTrack = humanoid:LoadAnimation(newAnim)
        newTrack.Priority = Enum.AnimationPriority.Action4
        newTrack:Play(Settings["Fade In"], Settings["Weight"], Settings["Speed"])
        CurrentTrack = newTrack
        CurrentTrack.TimePosition = math.clamp(Settings["Time Position"], 0, 1) * CurrentTrack.Length
    end

    LoadTrack(101852027997337)
end)
