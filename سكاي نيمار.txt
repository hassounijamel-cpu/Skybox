-- واجهة GUI أنيقة + أزرق غامق + برتقالي + حواف مستديرة
local player = game.Players.LocalPlayer

-- إنشاء العناصر
local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local Dropdown = Instance.new("TextButton")
local ListFrame = Instance.new("Frame")
local UIListLayout = Instance.new("UIListLayout")
local ActionButton = Instance.new("TextButton")

-- إعداد الـ GUI
ScreenGui.Name = "SkinsGUI"
ScreenGui.Parent = player:WaitForChild("PlayerGui")

Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.fromRGB(15, 35, 75) -- أزرق غامق
Frame.Size = UDim2.new(0, 500, 0, 500)
Frame.Position = UDim2.new(0.2, 0, 0.1, 0)
Frame.Active = true
Frame.Draggable = true
Frame.ClipsDescendants = true

-- العنوان
Title.Parent = Frame
Title.Text = "سكربت Skybox (نيمار)"
Title.Size = UDim2.new(1, 0, 0, 60)
Title.BackgroundColor3 = Color3.fromRGB(255, 140, 0) -- برتقالي
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 32
Title.TextStrokeTransparency = 0.7
Title.BorderSizePixel = 0
Title.BackgroundTransparency = 0
Title.AutoLocalize = false

-- Dropdown لاختيار السكن
Dropdown.Parent = Frame
Dropdown.Position = UDim2.new(0, 50, 0, 100)
Dropdown.Size = UDim2.new(0, 400, 0, 50)
Dropdown.BackgroundColor3 = Color3.fromRGB(255, 140, 0) -- برتقالي
Dropdown.Text = "اضغط لاختيار سكن"
Dropdown.TextColor3 = Color3.fromRGB(255, 255, 255)
Dropdown.Font = Enum.Font.SourceSansBold
Dropdown.TextSize = 24
Dropdown.AutoLocalize = false

-- تدوير الحواف
local function makeRounded(frame, radius)
	local UICorner = Instance.new("UICorner")
	UICorner.CornerRadius = UDim.new(0, radius)
	UICorner.Parent = frame
end

makeRounded(Frame, 20)
makeRounded(Dropdown, 15)

-- ListFrame لخيارات السكن
ListFrame.Parent = Frame
ListFrame.BackgroundColor3 = Color3.fromRGB(25, 55, 105) -- أزرق أفتح
ListFrame.Position = UDim2.new(0, 50, 0, 160)
ListFrame.Size = UDim2.new(0, 400, 0, 200)
ListFrame.Visible = false
UIListLayout.Parent = ListFrame
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
makeRounded(ListFrame, 15)

-- زر فعل السكن والرقصة يظهر دائمًا
ActionButton.Parent = Frame
ActionButton.Position = UDim2.new(0, 50, 0, 380)
ActionButton.Size = UDim2.new(0, 400, 0, 60)
ActionButton.BackgroundColor3 = Color3.fromRGB(255, 140, 0) -- برتقالي
ActionButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ActionButton.Font = Enum.Font.SourceSansBold
ActionButton.TextSize = 28
ActionButton.Text = "فعل skybox"
ActionButton.Visible = true
makeRounded(ActionButton, 20)

-- قائمة السكنات
local Skins = {
	["سكن رعب"] = 11714553713,
	["سكن رعب ٢"] = 4704597991,
	["سكن رعب ٣"] = 117925030640474,
	["سكن برشلونه"] = 15795436784,
	["سكن ريال مدريد"] = 1314630071
}

local selectedSkinId

-- إنشاء أزرار السكنات داخل ListFrame
for name, id in pairs(Skins) do
	local Button = Instance.new("TextButton")
	Button.Size = UDim2.new(1, 0, 0, 40)
	Button.Text = name
	Button.BackgroundColor3 = Color3.fromRGB(255, 140, 0) -- برتقالي
	Button.TextColor3 = Color3.fromRGB(255, 255, 255)
	Button.Font = Enum.Font.SourceSansBold
	Button.TextSize = 22
	Button.Parent = ListFrame
	makeRounded(Button, 15)

	Button.MouseButton1Click:Connect(function()
		Dropdown.Text = "✅ " .. name
		ListFrame.Visible = false
		selectedSkinId = id

		-- لبس السكن فور الاختيار
		local args = { id }
		game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("WearShirt"):InvokeServer(unpack(args))
	end)
end

-- فتح وإغلاق القائمة
Dropdown.MouseButton1Click:Connect(function()
	ListFrame.Visible = not ListFrame.Visible
end)

-- وظيفة زر فعل السكن والرقصة
ActionButton.MouseButton1Click:Connect(function()
	print("تم الضغط على زر فعل السكن والرقصة")

	local args = {
		{100839513065432} -- ID لتغيير الشخصية
	}
	game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("ChangeCharacterBody"):InvokeServer(unpack(args))

	-- الكود الخاص بالأنيميشن
	local character = player.Character or player.CharacterAdded:Wait()
	local humanoid = character:WaitForChild("Humanoid")
	local CurrentTrack
	local Settings = {
		["Fade In"] = 0.1,
		["Fade Out"] = 0.1,
		["Weight"] = 1,
		["Speed"] = 1,
		["Time Position"] = 0
	}

	local function LoadTrack(id)
		if CurrentTrack then CurrentTrack:Stop(0) end
		local animId = "rbxassetid://" .. tostring(id)
		local newAnim = Instance.new("Animation")
		newAnim.AnimationId = animId
		local newTrack = humanoid:LoadAnimation(newAnim)
		newTrack.Priority = Enum.AnimationPriority.Action4
		newTrack:Play(Settings["Fade In"], Settings["Weight"], Settings["Speed"])
		CurrentTrack = newTrack
		CurrentTrack.TimePosition = math.clamp(Settings["Time Position"], 0, 1) * CurrentTrack.Length
	end

	LoadTrack(101852027997337) -- ID الرقصة
end)
